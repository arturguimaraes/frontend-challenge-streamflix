(this["webpackJsonpcoding-challenge-frontend"]=this["webpackJsonpcoding-challenge-frontend"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports={episode:"Episode_episode__3jV9T",imageContainer:"Episode_imageContainer__HFb9S",image:"Episode_image__1YCgR",summary:"Episode_summary__1aC2X",detail:"Episode_detail__1C93a",title:"Episode_title__2Jup2",summaryElement:"Episode_summaryElement__2J-xi",noImage:"Episode_noImage__2PInI"}},function(e,t,a){e.exports={main:"Layout_main__auk_r",left:"Layout_left__1Abwf",container:"Layout_container__2pYuJ",header:"Layout_header__19U8b",content:"Layout_content__2zCUh"}},,function(e,t,a){e.exports={loader:"Loader_loader__1OXgp",inner:"Loader_inner__Zd7RF",one:"Loader_one__1eFUA","rotate-left":"Loader_rotate-left__3yYAa",two:"Loader_two__3XzQW",container:"Loader_container__1F1gM"}},function(e,t,a){e.exports={imageContainer:"Info_imageContainer__1YnqU",image:"Info_image__1rqXo",info:"Info_info__6XL7f",summary:"Info_summary__3KT8v",noImage:"Info_noImage__1eAcE",summaryElement:"Info_summaryElement__2gWF7"}},,function(e,t,a){e.exports={detail:"Detail_detail__29Cku",detailInfo:"Detail_detailInfo__3UWgV"}},function(e,t,a){e.exports={form:"Auth_form__3x9wS",button:"Auth_button__lAqNt",wrongInput:"Auth_wrongInput__P13aV",wrongInputMessage:"Auth_wrongInputMessage__2n2AT",wobble:"Auth_wobble__lQtaF",shake:"Auth_shake__2G6ik"}},,,function(e,t,a){e.exports={container:"LeftPanel_container__Jb1S5",clickableMobile:"LeftPanel_clickableMobile__xTAkH"}},,,,function(e,t,a){e.exports={form:"Search_form__1t9m1",button:"Search_button__mBLuw"}},function(e,t,a){e.exports={clickable:"SeasonPanel_clickable__2eN38",selected:"SeasonPanel_selected__v2SDc"}},,,,function(e,t,a){e.exports={container:"Episodes_container__WXQ2L"}},function(e,t,a){e.exports={logout:"Logout_logout__3lZEJ"}},,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(19),c=a.n(s),o=a(4),r=a(21),i=a(28);const l="SET_SEASONS",u="SELECT_SEASON",d="EMPTY_SEASONS",j={emptySeasons:()=>({type:d}),selectSeason:e=>({payload:e,type:u}),setSeasons:e=>({payload:e,type:l})},{setSeasons:m,selectSeason:b,emptySeasons:h}=j,p="FETCH_SHOW_ERROR",O="FETCH_SHOW_REQUEST",_="FETCH_SHOW_SUCCESS",g="START_TYPING",f={fetchShowError:e=>({payload:e,type:p}),fetchShowRequest:()=>({type:O}),fetchShowSuccess:e=>({payload:e,type:_}),startTyping:()=>({type:g})},x=e=>async t=>{t(v());const a="".concat("https://api.tvmaze.com/singlesearch","/shows?q=").concat(encodeURI(e),"&embed=episodes"),{response:n,error:s}=await fetch(a).then((e=>({error:null,response:e}))).catch((e=>({error:e,response:null})));if(s||!n)return t(N(s)),void t(h());const c=await n.json();if(200!==n.status||null==c)return t(y("Not found")),void t(h());t(y(c));const o=c._embedded.episodes,r=[];o.forEach((e=>{const{season:t}=e,a=t-1;if(!r[a]){const e={name:"Season ".concat(t),number:t,episodes:[]};r[a]=e}r[a].episodes.push(e)})),t(m(r))},{startTyping:S,fetchShowRequest:v,fetchShowSuccess:y,fetchShowError:N}=f,w={error:null,loading:!1,show:null,typing:!1};var E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case g:return{...e,error:null,loading:!1,show:null,typing:!0};case O:return{...e,error:null,loading:!0,show:null,typing:!1};case _:return{...e,error:null,loading:!1,show:t.payload,typing:!1};case p:return{...e,error:t.payload,loading:!1,show:null,typing:!1};default:return e}};const I={seasons:[],selected:1};var L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return{...e,seasons:t.payload,selected:1};case u:return{...e,selected:t.payload};case d:return{...e,seasons:[],selected:1};default:return e}},T=a(15),C=a.n(T);const k="LOGIN_FAIL",R="LOGIN_SUCCESS",A="LOGOUT",M=(e,t)=>"supersecret"!==t?k:R,P={login:(e,t)=>({payload:e,type:M(0,t)}),logout:()=>({type:A})},{login:Y,logout:U}=P,F=(e,t)=>{try{return window.localStorage.setItem(e,JSON.stringify(t)),t}catch(a){return null}},z=e=>{try{return window.localStorage.removeItem(e),!0}catch(t){return!1}},H={authorized:(e=>{try{const t=window.localStorage.getItem(e);if(null===t)return!1;const a=JSON.parse(t);return!!a.authorized&&a.authorized}catch(t){return!1}})("auth"),failed:!1,time:null,username:""};var q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case R:const a={...e,authorized:!0,failed:!1,time:C()(),username:t.payload};return F("auth",a),a;case k:return{...e,authorized:!1,failed:!0,username:t.payload};case A:return z("auth"),{...e,authorized:!1,failed:!1,time:null,user:""};default:return e}};var J=Object(r.c)(Object(r.b)({authState:q,seasonState:L,showState:E}),Object(r.a)(i.a)),W=a(12),D=a(5),G=a(0);var X=function(){return Object(G.jsxs)("div",{className:"center-mobile",children:[Object(G.jsx)("p",{children:"Welcome!"}),Object(G.jsx)("p",{children:"Search your show in the search box to the left."})]})},K=a(13),Q=a.n(K);var V=function(){return Object(G.jsx)("div",{className:Q.a.container,children:Object(G.jsxs)("div",{className:Q.a.loader,children:[Object(G.jsx)("div",{className:"".concat(Q.a.inner," ").concat(Q.a.one)}),Object(G.jsx)("div",{className:"".concat(Q.a.inner," ").concat(Q.a.two)})]})})};var B=function(){return Object(G.jsx)(V,{})},Z=a(2),$=a.n(Z);$.a.shape({genres:$.a.arrayOf($.a.string),image:$.a.shape({medium:$.a.string,original:$.a.string}),language:$.a.string,name:$.a.string,premiered:$.a.string,rating:$.a.shape({average:$.a.number}),summary:$.a.string});const ee={show:$.a.shape({genres:null,image:null,language:null,name:"Title",premiered:null,rating:null,summary:"No summary"})};var te=a(16),ae=a.n(te);function ne(e){let{show:t}=e;const{premiered:a,language:n,rating:s,genres:c}=t;return Object(G.jsxs)("div",{className:ae.a.detail,children:[a&&Object(G.jsxs)("span",{className:ae.a.detailInfo,children:[Object(G.jsx)("b",{children:"Year:"}),C()(a).format("YYYY")]}),n&&Object(G.jsxs)("span",{className:ae.a.detailInfo,children:[Object(G.jsx)("b",{children:"Language:"}),n]}),s&&s.average&&Object(G.jsxs)("span",{className:ae.a.detailInfo,children:[Object(G.jsx)("b",{children:"Rating:"}),s.average]}),c&&c.length>0&&Object(G.jsxs)("span",{className:ae.a.detailInfo,children:[Object(G.jsx)("b",{children:"Genres:"}),c.join(", ")]})]})}ne.defaultProps=ee;var se=ne,ce=a(14),oe=a.n(ce);function re(e){let{show:t}=e;const{name:a,summary:n,image:s}=t;let c=null;s&&(c=s.medium||c.original);const o=Object(G.jsx)("div",{className:oe.a.summaryElement,dangerouslySetInnerHTML:{__html:n}});return Object(G.jsxs)("div",{className:oe.a.info,children:[Object(G.jsxs)("div",{className:oe.a.imageContainer,children:[!c&&Object(G.jsx)("p",{className:oe.a.noImage,children:"No image"}),c&&Object(G.jsx)("img",{className:oe.a.image,src:c,alt:a})]}),Object(G.jsxs)("div",{className:oe.a.summary,children:[o,Object(G.jsx)(se,{show:t})]})]})}re.defaultProps=ee;var ie=re;var le={airdate:$.a.string,image:$.a.shape({medium:$.a.string,original:$.a.string}),name:$.a.string,number:$.a.number,season:$.a.number,summary:$.a.string};$.a.arrayOf(le),$.a.string,$.a.number,$.a.bool;var ue=a(10),de=a.n(ue);var je=function(e){let{episode:t}=e;const{name:a,image:n,summary:s,airdate:c,season:o,number:r}=t,i=Object(G.jsx)("div",{className:de.a.summaryElement,dangerouslySetInnerHTML:{__html:s}});let l=null;n&&(l=n.medium||l.original);const u=C()(c).format("MMMM Do, YYYY");return Object(G.jsxs)("div",{className:de.a.episode,children:[Object(G.jsxs)("div",{className:de.a.imageContainer,children:[!l&&Object(G.jsx)("p",{className:de.a.noImage,children:"No image"}),l&&Object(G.jsx)("img",{className:de.a.image,src:l,alt:a})]}),Object(G.jsxs)("div",{className:de.a.summary,children:[Object(G.jsx)("p",{className:de.a.detail,children:"".concat(u," - Season ").concat(o,", Episode ").concat(r)}),Object(G.jsx)("p",{className:de.a.title,children:a}),i]})]})},me=a(29),be=a.n(me);var he=function(e){let{season:t}=e;const{episodes:a}=t;return a.sort(((e,t)=>e.number-t.number)),Object(G.jsx)("div",{className:be.a.container,children:a.map((e=>Object(G.jsx)(je,{episode:e},e.id)))})};var pe=function(){const{show:e}=Object(o.c)((e=>e.showState)),{selected:t,seasons:a}=Object(o.c)((e=>e.seasonState)),n=a.length>0,s=n?a[t-1]:null;return Object(G.jsxs)("div",{children:[!e&&Object(G.jsx)(D.a,{to:"/"}),e&&Object(G.jsx)(ie,{show:e}),!n&&Object(G.jsx)("p",{children:"No seasons available"}),n&&Object(G.jsx)(he,{season:s})]})};var Oe=function(){return Object(G.jsx)(pe,{})};var _e=function(){return Object(G.jsx)("div",{className:"center-mobile",children:Object(G.jsx)("p",{children:"No results found for this search."})})};var ge=function(){return Object(G.jsx)("div",{className:"center-mobile",children:Object(G.jsx)("p",{children:"Error fetching data."})})};const fe=[{component:Object(G.jsx)(X,{}),exact:!0,id:"search",path:"/",title:"Search"},{component:Object(G.jsx)(B,{}),id:"searching",path:"/searching",title:"Searching"},{component:Object(G.jsx)(Oe,{}),id:"title",path:"/title",title:"Title"},{component:Object(G.jsx)(_e,{}),id:"noResults",path:"/noResults",title:"No Results"},{component:Object(G.jsx)(ge,{}),id:"error",path:"/error",title:"Error"}];function xe(){const{authorized:e}=Object(o.c)((e=>e.authState));return e?Object(G.jsx)(D.d,{children:fe.map((e=>Object(G.jsx)(D.b,{path:e.path,exact:e.exact,children:e.component},e.id)))}):null}function Se(){const{loading:e,show:t,error:a,typing:n}=Object(o.c)((e=>e.showState));return e?Object(G.jsx)(D.a,{to:"/searching"}):n?Object(G.jsx)(D.a,{to:"/"}):a?Object(G.jsx)(D.a,{to:"/error"}):"Not found"===t?Object(G.jsx)(D.a,{to:"/noResults"}):null!=t&&"Not found"!==t?Object(G.jsx)(D.a,{to:"/title"}):Object(G.jsx)(D.a,{to:"/"})}var ve=a(24),ye=a.n(ve);var Ne=function(){const e=Object(o.b)(),t=Object(n.useRef)(),[a,s]=Object(n.useState)(""),c=Object(D.g)(),{loading:r}=Object(o.c)((e=>e.showState));return Object(n.useEffect)((()=>{"/"!==c.pathname&&"/noResults"!==c.pathname&&"/error"!==c.pathname||t.current.focus()}),[c.pathname]),Object(n.useEffect)((()=>{const t=setTimeout((()=>{e(S()),e(h())}),250);return()=>clearTimeout(t)}),[a,e]),Object(G.jsxs)("form",{method:"POST",className:ye.a.form,onSubmit:t=>{var n;t.preventDefault(),e((n=a,e=>{e(v()),setTimeout((()=>{e(x(n))}),1e3)})),e(h())},children:[Object(G.jsx)("input",{ref:t,type:"text",name:"title",placeholder:"Search title",required:!0,onKeyUp:()=>s(t.current.value),disabled:r,className:r?"disabled":""}),Object(G.jsx)("button",{type:"submit",disabled:r,className:"".concat(ye.a.button," ").concat(r?"disabled":""),children:"Go"})]})},we=a(25),Ee=a.n(we);var Ie=function(e){let{season:t,hiddenMobile:a,selected:n}=e;const{name:s,number:c}=t,r=Object(o.b)();return Object(G.jsx)("button",{onClick:()=>{n||r(b(c))},className:"".concat(Ee.a.clickable," ").concat(n&&Ee.a.selected," ").concat(a&&"hidden-mobile"),type:"button",children:s})},Le=a(20),Te=a.n(Le);var Ce=function(){const[e,t]=Object(n.useState)(!0),{seasons:a,selected:s}=Object(o.c)((e=>e.seasonState));if(!(a.length>0))return Object(G.jsx)("p",{children:"No seasons available"});a.sort(((e,t)=>e.number-t.number));const c=()=>{t(!e)};return Object(G.jsxs)("div",{className:Te.a.container,children:[e&&Object(G.jsx)("button",{onClick:c,className:Te.a.clickableMobile,type:"button",children:"Show Seasons"}),a.map((t=>Object(G.jsx)(Ie,{season:t,hiddenMobile:e,selected:s===t.number},t.number))),!e&&Object(G.jsx)("button",{onClick:c,className:Te.a.clickableMobile,type:"button",children:"Hide Seasons"})]})},ke=a(17),Re=a.n(ke);var Ae=function(){const e=Object(o.b)(),t=Object(n.useRef)(),[a,s]=Object(n.useState)(""),c=Object(n.useRef)(),[r,i]=Object(n.useState)(""),[l,u]=Object(n.useState)(!1),d=Object(o.c)((e=>e.authState));Object(n.useEffect)((()=>{t.current.focus()}),[]),Object(n.useEffect)((()=>{d.failed&&""!==a&&j()}),[d]);const j=()=>{t.current.value=a,c.current.value="",u(!0),setTimeout((()=>{u(!1)}),2e3)};return Object(G.jsxs)("form",{method:"POST",className:"".concat(Re.a.form," ").concat(l&&Re.a.wobble),onSubmit:t=>{t.preventDefault(),e(Y(a,r))},children:[Object(G.jsx)("input",{ref:t,type:"text",name:"username",placeholder:"Username",required:!0,onKeyUp:()=>s(t.current.value)}),Object(G.jsx)("input",{ref:c,type:"password",name:"password",placeholder:"Password",required:!0,onKeyUp:()=>i(c.current.value),onFocus:()=>u(!1),className:l?Re.a.wrongInput:""}),l&&Object(G.jsx)("p",{className:Re.a.wrongInputMessage,children:"Password incorret. Please try again."}),Object(G.jsx)("button",{type:"submit",className:Re.a.button,children:"Login"})]})},Me=a(30),Pe=a.n(Me);var Ye=function(){const e=Object(o.b)(),{loading:t}=Object(o.c)((e=>e.showState));return Object(G.jsx)("button",{type:"button",onClick:t=>{t.preventDefault(),e(U()),e(S()),e(h())},disabled:t,className:"".concat(Pe.a.logout),children:"Logout"})},Ue=a.p+"static/media/logo.e108b7d0.svg",Fe=a(11),ze=a.n(Fe);var He=function(){const e=Object(D.g)(),{show:t}=Object(o.c)((e=>e.showState)),{seasons:a}=Object(o.c)((e=>e.seasonState)),{authorized:n}=Object(o.c)((e=>e.authState));let s="";if(n)if("/title"===e.pathname&&null!==t&&"Not found"!==t)s=t.name;else{s=function(e){let t=fe.find((t=>t.path===e));return void 0===t&&(t=fe.find((e=>"notFound"===e.id))),t}(e.pathname).title}else s="Login";return Object(G.jsxs)("div",{className:ze.a.main,children:[Object(G.jsxs)("div",{className:ze.a.left,children:[Object(G.jsxs)("div",{className:ze.a.search,children:[Object(G.jsx)(W.b,{to:"/",children:Object(G.jsx)("img",{src:Ue,alt:"Logo"})}),!n&&Object(G.jsx)(Ae,{}),n&&Object(G.jsx)(Ne,{})]}),n&&a.length>0&&Object(G.jsx)(Ce,{})]}),Object(G.jsxs)("div",{className:ze.a.container,children:[n&&Object(G.jsx)("div",{className:ze.a.logoutContainer,children:Object(G.jsx)(Ye,{})}),Object(G.jsx)("div",{className:ze.a.header,children:Object(G.jsx)("h1",{children:s})}),Object(G.jsxs)("div",{className:ze.a.content,children:[Object(G.jsx)(xe,{}),Object(G.jsx)(Se,{})]})]})]})};var qe=function(){return Object(G.jsx)(W.a,{children:Object(G.jsxs)(He,{children:[Object(G.jsx)(xe,{}),Object(G.jsx)(Se,{})]})})};a(46);c.a.render(Object(G.jsx)(o.a,{store:J,children:Object(G.jsx)(qe,{})}),document.getElementById("root"))}],[[47,1,2]]]);
//# sourceMappingURL=main.7c9edff5.chunk.js.map